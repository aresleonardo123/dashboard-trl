{% extends "reports/base.html" %} {% block content %}
<div class="report-container">
  <div class="header">
    <div class="title">Reporte de Evaluación de Proyecto</div>
    <div class="subtitle">Sistema de Gestión TRL - Universidad Continental</div>
    <div class="date">Generado el: {{ fecha_generacion }}</div>
  </div>

  <div class="section">
    <div class="section-title">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"
        />
      </svg>
      Información del Proyecto
    </div>

    <div class="row">
      <div class="label">Nombre del Proyecto:</div>
      <div class="value">{{ nombre_proyecto }}</div>
    </div>

    <div class="row">
      <div class="label">Estado de Aprobación:</div>
      <div class="value">
        <span
          class="approval-status {% if aprobado == 'Sí' %}approved{% else %}rejected{% endif %}"
        >
          {{ aprobado }}
        </span>
      </div>
    </div>

    <div class="row">
      <div class="label">Nivel TRL:</div>
      <div class="value">{{ nivel_trl }}</div>
    </div>

    <div class="row">
      <div class="label">Docente Acompañante:</div>
      <div class="value">{{ docente_acompanante }}</div>
    </div>
  </div>

  <div class="section">
    <div class="section-title">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"
        />
      </svg>
      Resultados de Evaluación
    </div>

    <div class="row">
      <div class="label">TRL 1-3 (Básico):</div>
      <div class="value">
        <div class="progress-info">
          <span>Puntaje: {{ trl_1_3 }}%</span>
          <span
            >{% if trl_1_3|int >= 50 %}Competencia alcanzada{% else %}En
            desarrollo{% endif %}</span
          >
        </div>
        <div class="progress-bar">
          <div class="progress-fill trl1-3" style="width: {{ trl_1_3 }}%"></div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="label">TRL 4-7 (Intermedio):</div>
      <div class="value">
        <div class="progress-info">
          <span>Puntaje: {{ trl_4_7 }}%</span>
          <span
            >{% if trl_4_7|int >= 50 %}Competencia alcanzada{% else %}En
            desarrollo{% endif %}</span
          >
        </div>
        <div class="progress-bar">
          <div class="progress-fill trl4-7" style="width: {{ trl_4_7 }}%"></div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="label">TRL 8-9 (Avanzado):</div>
      <div class="value">
        <div class="progress-info">
          <span>Puntaje: {{ trl_8_9 }}%</span>
          <span
            >{% if trl_8_9|int >= 50 %}Competencia alcanzada{% else %}En
            desarrollo{% endif %}</span
          >
        </div>
        <div class="progress-bar">
          <div class="progress-fill trl8-9" style="width: {{ trl_8_9 }}%"></div>
        </div>
      </div>
    </div>

    {% if insights %}
    <div class="row" style="margin-top: 1rem; align-items: flex-start">
      <div class="label" style="margin-top: 0.2rem">Insights:</div>
      <div class="value">
        <ul style="list-style-type: disc; padding-left: 1.2rem; margin: 0">
          {% for item in insights %}
          <li style="margin-bottom: 0.4rem">{{ item }}</li>
          {% endfor %}
        </ul>
      </div>
    </div>
    {% endif %}

    <div class="footer">
      Reporte generado automáticamente por el Sistema TRL - Universidad
      Continental
    </div>

    <div class="no-print" style="margin-top: 2rem; text-align: center">
      <button
        onclick="window.print()"
        style="
          padding: 0.6rem 1.5rem;
          background-color: var(--primary-color);
          color: white;
          border: none;
          border-radius: 0.375rem;
          cursor: pointer;
          font-weight: 500;
          transition: background-color 0.2s;
        "
      >
        Imprimir Reporte
      </button>
    </div>
  </div>
  <script>
    window.onload = function () {
      // Esperar 500ms para asegurar que todo el contenido esté cargado
      setTimeout(() => {
        window.print();
        // Opcional: cerrar la ventana después de imprimir
        window.onafterprint = function () {
          window.close();
        };
      }, 500);
    };
  </script>
  {% endblock %}
</div>
